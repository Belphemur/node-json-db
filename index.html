<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>node-json-db</title><meta name="description" content="Documentation for node-json-db"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">node-json-db</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>node-json-db</h2></div>
<div class="tsd-panel tsd-typography"><p><a href="https://github.com/Belphemur/node-json-db/actions/workflows/nodejs.yml"><img src="https://github.com/Belphemur/node-json-db/actions/workflows/nodejs.yml/badge.svg" alt="NodeJs"></a> <a href="https://codecov.io/gh/Belphemur/node-json-db"><img src="https://codecov.io/gh/Belphemur/node-json-db/branch/master/graph/badge.svg?token=J3Ppt4UCbY" alt="codecov"></a>
<a href="https://badge.fury.io/js/node-json-db"><img src="https://badge.fury.io/js/node-json-db.svg" alt="npm version"></a></p>
<blockquote>
<p>A simple &quot;database&quot; that use JSON file for Node.JS.</p>
</blockquote>

<a href="#breaking-changes-since-v1xx" id="breaking-changes-since-v1xx" style="color: inherit; text-decoration: none;">
  <h2>Breaking changes since v1.x.x</h2>
</a>

<a href="#v200" id="v200" style="color: inherit; text-decoration: none;">
  <h3>v2.0.0</h3>
</a>
<p>JsonDB is now using the concept of async/await for all its calls since we read from the database file on demands and
depending on how the database is configured, we might write at each push.</p>
<ul>
<li>You&#39;re now forced to use the <code>Config</code> object to setup JsonDB</li>
<li>Every method are now asynchronous</li>
</ul>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<p>Add <code>node-json-db</code> to your existing Node.js project.</p>
<pre><code class="language-bash"><span class="hl-0">yarn add node-json-db</span>
</code></pre>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h2>Documentation</h2>
</a>
<p><a href="https://belphemur.github.io/node-json-db">Auto Generated</a></p>

<a href="#inner-working" id="inner-working" style="color: inherit; text-decoration: none;">
  <h2>Inner Working</h2>
</a>

<a href="#data" id="data" style="color: inherit; text-decoration: none;">
  <h3>Data</h3>
</a>
<p>The module stores the data using JavaScript Object directly into a JSON file. You can easily traverse the data to reach 
directly the interesting property using the DataPath. The principle of DataPath is the same as XMLPath.</p>

<a href="#example" id="example" style="color: inherit; text-decoration: none;">
  <h3>Example</h3>
</a>
<pre><code class="language-javascript"><span class="hl-0">{</span><br/><span class="hl-0">    </span><span class="hl-1">test</span><span class="hl-0">: {</span><br/><span class="hl-0">        </span><span class="hl-1">data1</span><span class="hl-0"> : {</span><br/><span class="hl-0">            </span><span class="hl-1">array</span><span class="hl-0"> : [</span><span class="hl-2">&#39;test&#39;</span><span class="hl-0">,</span><span class="hl-2">&#39;array&#39;</span><span class="hl-0">]</span><br/><span class="hl-0">        },</span><br/><span class="hl-0">        </span><span class="hl-1">data2</span><span class="hl-0"> : </span><span class="hl-3">5</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">}</span>
</code></pre>
<p>If you want to fetch the value of array, the DataPath is <strong>/test/data1/array</strong>
To reach the value of data2 : <strong>/test/data2</strong>
You can of course get also the full object <strong>test</strong> : <strong>/test</strong>
Or even the root : <strong>/</strong></p>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>
<p>See <a href="https://github.com/Belphemur/node-json-db/tree/master/test">test</a> for more usage details.</p>
<pre><code class="language-javascript"><span class="hl-4">import</span><span class="hl-0"> { </span><span class="hl-5">JsonDB</span><span class="hl-0">, </span><span class="hl-5">Config</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-2">&#39;node-json-db&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-6">// The first argument is the database filename. If no extension, &#39;.json&#39; is assumed and automatically added.</span><br/><span class="hl-6">// The second argument is used to tell the DB to save after each push</span><br/><span class="hl-6">// If you put false, you&#39;ll have to call the save() method.</span><br/><span class="hl-6">// The third argument is to ask JsonDB to save the database in an human readable format. (default false)</span><br/><span class="hl-6">// The last argument is the separator. By default it&#39;s slash (/)</span><br/><span class="hl-7">var</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0"> = </span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">JsonDB</span><span class="hl-0">(</span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">Config</span><span class="hl-0">(</span><span class="hl-2">&quot;myDataBase&quot;</span><span class="hl-0">, </span><span class="hl-7">true</span><span class="hl-0">, </span><span class="hl-7">false</span><span class="hl-0">, </span><span class="hl-2">&#39;/&#39;</span><span class="hl-0">));</span><br/><br/><span class="hl-6">// Pushing the data into the database</span><br/><span class="hl-6">// With the wanted DataPath</span><br/><span class="hl-6">// By default the push will override the old value</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/test1&quot;</span><span class="hl-0">,</span><span class="hl-2">&quot;super test&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// It also create automatically the hierarchy when pushing new data for a DataPath that doesn&#39;t exists</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/test2/my/test&quot;</span><span class="hl-0">,</span><span class="hl-3">5</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// You can also push directly objects</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/test3&quot;</span><span class="hl-0">, {</span><span class="hl-5">test:</span><span class="hl-2">&quot;test&quot;</span><span class="hl-0">, </span><span class="hl-5">json:</span><span class="hl-0"> {</span><span class="hl-5">test:</span><span class="hl-0">[</span><span class="hl-2">&quot;test&quot;</span><span class="hl-0">]}});</span><br/><br/><span class="hl-6">// If you don&#39;t want to override the data but to merge them</span><br/><span class="hl-6">// The merge is recursive and work with Object and Array.</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/test3&quot;</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-5">new:</span><span class="hl-2">&quot;cool&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">json:</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-5">important :</span><span class="hl-0"> </span><span class="hl-3">5</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">}, </span><span class="hl-7">false</span><span class="hl-0">);</span><br/><br/><span class="hl-6">/*</span><br/><span class="hl-6">This give you this results :</span><br/><span class="hl-6">{</span><br/><span class="hl-6">   &quot;test&quot;:&quot;test&quot;,</span><br/><span class="hl-6">   &quot;json&quot;:{</span><br/><span class="hl-6">      &quot;test&quot;:[</span><br/><span class="hl-6">         &quot;test&quot;</span><br/><span class="hl-6">      ],</span><br/><span class="hl-6">      &quot;important&quot;:5</span><br/><span class="hl-6">   },</span><br/><span class="hl-6">   &quot;new&quot;:&quot;cool&quot;</span><br/><span class="hl-6">}</span><br/><span class="hl-6">*/</span><br/><br/><span class="hl-6">// You can&#39;t merge primitive.</span><br/><span class="hl-6">// If you do this:</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/test2/my/test/&quot;</span><span class="hl-0">,</span><span class="hl-3">10</span><span class="hl-0">,</span><span class="hl-7">false</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// The data will be overriden</span><br/><br/><span class="hl-6">// Get the data from the root</span><br/><span class="hl-7">var</span><span class="hl-0"> </span><span class="hl-5">data</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// From a particular DataPath</span><br/><span class="hl-7">var</span><span class="hl-0"> </span><span class="hl-5">data</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/test1&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// If you try to get some data from a DataPath that doesn&#39;t exists</span><br/><span class="hl-6">// You&#39;ll get an Error</span><br/><span class="hl-4">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-7">var</span><span class="hl-0"> </span><span class="hl-5">data</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/test1/test/dont/work&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">} </span><span class="hl-4">catch</span><span class="hl-0">(</span><span class="hl-5">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-6">// The error will tell you where the DataPath stopped. In this case test1</span><br/><span class="hl-0">    </span><span class="hl-6">// Since /test1/test does&#39;t exist.</span><br/><span class="hl-0">    </span><span class="hl-5">console</span><span class="hl-0">.</span><span class="hl-8">error</span><span class="hl-0">(</span><span class="hl-5">error</span><span class="hl-0">);</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-6">// Deleting data</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">delete</span><span class="hl-0">(</span><span class="hl-2">&quot;/test1&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// Save the data (useful if you disable the saveOnPush)</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">save</span><span class="hl-0">();</span><br/><br/><span class="hl-6">// In case you have a exterior change to the databse file and want to reload it</span><br/><span class="hl-6">// use this method</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">reload</span><span class="hl-0">();</span><br/>
</code></pre>

<a href="#typescript-support" id="typescript-support" style="color: inherit; text-decoration: none;">
  <h3>TypeScript Support</h3>
</a>

<a href="#v080" id="v080" style="color: inherit; text-decoration: none;">
  <h4>v0.8.0</h4>
</a>
<p>As of v0.8.0, <a href="https://www.typescriptlang.org">TypeScript</a> types are
included in this package, so using <code>@types/node-json-db</code> is no longer required.</p>

<a href="#v100" id="v100" style="color: inherit; text-decoration: none;">
  <h4>v1.0.0</h4>
</a>
<p>JsonDB isn&#39;t exported as default any more. You&#39;ll need to change how you load the library.</p>
<p>This change is done to follow the right way to import module.</p>
<pre><code class="language-javascript"><span class="hl-4">import</span><span class="hl-0"> { </span><span class="hl-5">JsonDB</span><span class="hl-0">, </span><span class="hl-5">Config</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-2">&#39;node-json-db&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">const</span><span class="hl-0"> </span><span class="hl-9">db</span><span class="hl-0"> = </span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">JsonDB</span><span class="hl-0">(</span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">Config</span><span class="hl-0">(</span><span class="hl-2">&quot;myDataBase&quot;</span><span class="hl-0">, </span><span class="hl-7">true</span><span class="hl-0">, </span><span class="hl-7">false</span><span class="hl-0">, </span><span class="hl-2">&#39;/&#39;</span><span class="hl-0">));</span>
</code></pre>

<a href="#typing" id="typing" style="color: inherit; text-decoration: none;">
  <h4>Typing</h4>
</a>
<p>With TypeScript, you have access to a new method: getObject<T> that will take care of typing your return object.</p>
<pre><code class="language-typescript"><span class="hl-4">import</span><span class="hl-0"> { </span><span class="hl-5">JsonDB</span><span class="hl-0">, </span><span class="hl-5">Config</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-2">&#39;node-json-db&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">const</span><span class="hl-0"> </span><span class="hl-9">db</span><span class="hl-0"> = </span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">JsonDB</span><span class="hl-0">(</span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">Config</span><span class="hl-0">(</span><span class="hl-2">&quot;myDataBase&quot;</span><span class="hl-0">, </span><span class="hl-7">true</span><span class="hl-0">, </span><span class="hl-7">false</span><span class="hl-0">, </span><span class="hl-2">&#39;/&#39;</span><span class="hl-0">));</span><br/><br/><span class="hl-7">interface</span><span class="hl-0"> </span><span class="hl-10">FooBar</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">Hello</span><span class="hl-0">: </span><span class="hl-10">string</span><br/><span class="hl-0">    </span><span class="hl-5">World</span><span class="hl-0">: </span><span class="hl-10">number</span><br/><span class="hl-0">}</span><br/><span class="hl-7">const</span><span class="hl-0"> </span><span class="hl-9">object</span><span class="hl-0"> = {</span><span class="hl-5">Hello:</span><span class="hl-0"> </span><span class="hl-2">&quot;World&quot;</span><span class="hl-0">, </span><span class="hl-5">World:</span><span class="hl-0"> </span><span class="hl-3">5</span><span class="hl-0">} </span><span class="hl-4">as</span><span class="hl-0"> </span><span class="hl-10">FooBar</span><span class="hl-0">;</span><br/><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/test&quot;</span><span class="hl-0">, </span><span class="hl-5">object</span><span class="hl-0">);</span><br/><br/><span class="hl-6">//Will be typed as FooBar in your IDE</span><br/><span class="hl-7">const</span><span class="hl-0"> </span><span class="hl-9">result</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getObject</span><span class="hl-0">&lt;</span><span class="hl-10">FooBar</span><span class="hl-0">&gt;(</span><span class="hl-2">&quot;/test&quot;</span><span class="hl-0">);</span>
</code></pre>

<a href="#array-support" id="array-support" style="color: inherit; text-decoration: none;">
  <h3>Array Support</h3>
</a>
<p>You can also access the information stored into arrays and manipulate them.</p>
<pre><code class="language-typescript"><span class="hl-4">import</span><span class="hl-0"> { </span><span class="hl-5">JsonDB</span><span class="hl-0">, </span><span class="hl-5">Config</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-2">&#39;node-json-db&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-6">// The first argument is the database filename. If no extension, &#39;.json&#39; is assumed and automatically added.</span><br/><span class="hl-6">// The second argument is used to tell the DB to save after each push</span><br/><span class="hl-6">// If you put false, you&#39;ll have to call the save() method.</span><br/><span class="hl-6">// The third argument is to ask JsonDB to save the database in an human readable format. (default false)</span><br/><span class="hl-7">const</span><span class="hl-0"> </span><span class="hl-9">db</span><span class="hl-0"> = </span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">JsonDB</span><span class="hl-0">(</span><span class="hl-7">new</span><span class="hl-0"> </span><span class="hl-8">Config</span><span class="hl-0">(</span><span class="hl-2">&quot;myDataBase&quot;</span><span class="hl-0">, </span><span class="hl-7">true</span><span class="hl-0">, </span><span class="hl-7">false</span><span class="hl-0">, </span><span class="hl-2">&#39;/&#39;</span><span class="hl-0">));</span><br/><br/><span class="hl-6">// This will create an array &#39;myarray&#39; with the object &#39;{obj:&#39;test&#39;}&#39; at index 0</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[0]&quot;</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-5">obj:</span><span class="hl-2">&#39;test&#39;</span><br/><span class="hl-0">}, </span><span class="hl-7">true</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// You can retrieve a property of an object included in an array</span><br/><span class="hl-6">// testString = &#39;test&#39;;</span><br/><span class="hl-7">var</span><span class="hl-0"> </span><span class="hl-5">testString</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[0]/obj&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// Doing this will delete the object stored at the index 0 of the array.</span><br/><span class="hl-6">// Keep in mind this won&#39;t delete the array even if it&#39;s empty.</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">delete</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[0]&quot;</span><span class="hl-0">);</span>
</code></pre>

<a href="#appending-in-array" id="appending-in-array" style="color: inherit; text-decoration: none;">
  <h4>Appending in Array</h4>
</a>
<pre><code class="language-javascript"><span class="hl-6">// You can also easily append new item to an existing array</span><br/><span class="hl-6">// This set the next index with {obj: &#39;test&#39;}</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[]&quot;</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-5">obj:</span><span class="hl-2">&#39;test&#39;</span><br/><span class="hl-0">}, </span><span class="hl-7">true</span><span class="hl-0">);</span><br/><br/><br/><span class="hl-6">// The append feature can be used in conjuction with properties</span><br/><span class="hl-6">// This will set the next index as an object {myTest: &#39;test&#39;}</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[]/myTest&quot;</span><span class="hl-0">, </span><span class="hl-2">&#39;test&#39;</span><span class="hl-0">, </span><span class="hl-7">true</span><span class="hl-0">);</span><br/>
</code></pre>

<a href="#last-item-in-array" id="last-item-in-array" style="color: inherit; text-decoration: none;">
  <h4>Last Item in Array</h4>
</a>
<pre><code class="language-javascript"><span class="hl-6">// Add basic array</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/lastItemArray&quot;</span><span class="hl-0">, [</span><span class="hl-3">1</span><span class="hl-0">, </span><span class="hl-3">2</span><span class="hl-0">, </span><span class="hl-3">3</span><span class="hl-0">], </span><span class="hl-7">true</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// You can easily get the last item of the array with the index -1</span><br/><span class="hl-6">// This will return 3</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/lastItemArray[-1]&quot;</span><span class="hl-0">);</span><br/><br/><br/><span class="hl-6">// You can delete the last item of an array with -1</span><br/><span class="hl-6">// This will remove the integer &quot;3&quot; from the array</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">delete</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/lastItemArray[-1]&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// This will return 2 since 3 just got removed</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/lastItemArray[-1]&quot;</span><span class="hl-0">);</span>
</code></pre>

<a href="#count-for-array" id="count-for-array" style="color: inherit; text-decoration: none;">
  <h4>Count for Array</h4>
</a>
<pre><code class="language-javascript"><span class="hl-6">//</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/list&quot;</span><span class="hl-0">, [{</span><span class="hl-5">id:</span><span class="hl-0"> </span><span class="hl-3">65464646155</span><span class="hl-0">, </span><span class="hl-5">name:</span><span class="hl-0"> </span><span class="hl-2">&quot;test&quot;</span><span class="hl-0">}], </span><span class="hl-7">true</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// You can have the number of element, in this case  = 1</span><br/><span class="hl-7">let</span><span class="hl-0"> </span><span class="hl-5">numberOfElement</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">count</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/list&quot;</span><span class="hl-0">);</span>
</code></pre>

<a href="#get-index-in-array" id="get-index-in-array" style="color: inherit; text-decoration: none;">
  <h4>Get Index in Array</h4>
</a>
<pre><code class="language-javascript"><br/><span class="hl-6">// You can have the current index of an object</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray&quot;</span><span class="hl-0">, {</span><span class="hl-5">id:</span><span class="hl-0"> </span><span class="hl-3">65464646155</span><span class="hl-0">, </span><span class="hl-5">name:</span><span class="hl-0"> </span><span class="hl-2">&quot;test&quot;</span><span class="hl-0">}, </span><span class="hl-7">true</span><span class="hl-0">);</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getIndex</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray&quot;</span><span class="hl-0">, </span><span class="hl-3">65464646155</span><span class="hl-0">);</span><br/><span class="hl-6">// By default, the property is &#39;id&#39;</span><br/><span class="hl-6">// You can add another property instead</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getIndex</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray&quot;</span><span class="hl-0">, </span><span class="hl-2">&quot;test&quot;</span><span class="hl-0">, </span><span class="hl-2">&quot;name&quot;</span><span class="hl-0">);</span><br/><br/><span class="hl-6">// It&#39;s useful if you want to delete some object</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">delete</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[&quot;</span><span class="hl-0"> + </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getIndex</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray&quot;</span><span class="hl-0">, </span><span class="hl-3">65464646155</span><span class="hl-0">) + </span><span class="hl-2">&quot;]&quot;</span><span class="hl-0">);</span>
</code></pre>

<a href="#nesting-in-array" id="nesting-in-array" style="color: inherit; text-decoration: none;">
  <h4>Nesting in Array</h4>
</a>
<pre><code class="language-javascript"><span class="hl-6">// You can easily access any nested array and their object</span><br/><span class="hl-6">//You can also append to nested array other array</span><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">push</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">[</span><br/><span class="hl-0">  [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-5">obj:</span><span class="hl-0"> </span><span class="hl-2">&#39;test&#39;</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-5">obj:</span><span class="hl-0"> </span><span class="hl-2">&#39;hello&#39;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ],</span><br/><span class="hl-0">  [</span><br/><span class="hl-0">    {</span><br/><span class="hl-0">      </span><span class="hl-5">obj:</span><span class="hl-0"> </span><span class="hl-2">&#39;world&#39;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  ]</span><br/><span class="hl-0">]</span><br/><span class="hl-0">, </span><span class="hl-7">true</span><span class="hl-0">);</span><br/><br/><span class="hl-6">//This will return the first object (obj: &#39;test&#39;)</span><br/><br/><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">db</span><span class="hl-0">.</span><span class="hl-8">getData</span><span class="hl-0">(</span><span class="hl-2">&quot;/arraytest/myarray[0][0]&quot;</span><span class="hl-0">);</span><br/>
</code></pre>

<a href="#exceptionerror" id="exceptionerror" style="color: inherit; text-decoration: none;">
  <h3>Exception/Error</h3>
</a>

<a href="#type" id="type" style="color: inherit; text-decoration: none;">
  <h4>Type</h4>
</a>
<table>
<thead>
<tr>
<th>Type</th>
<th align="center">Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>DataError</td>
<td align="center">When the error is linked to the Data Given</td>
</tr>
<tr>
<td>DatabaseError</td>
<td align="center">Linked to a problem with the loading or saving of the Database.</td>
</tr>
</tbody></table>

<a href="#errors" id="errors" style="color: inherit; text-decoration: none;">
  <h4>Errors</h4>
</a>
<table>
<thead>
<tr>
<th>Error</th>
<th align="center">Type</th>
<th>Explanation</th>
</tr>
</thead>
<tbody><tr>
<td>The Data Path can&#39;t be empty</td>
<td align="center">DataError</td>
<td>The Database expect to minimum receive the root <strong>separator</strong> as DataPath.</td>
</tr>
<tr>
<td>Can&#39;t find dataPath: /XXX. Stopped at YYY</td>
<td align="center">DataError</td>
<td>When the full hierarchy of the DataPath given is not present in the Database. It tells you until where it&#39;s valid. This error can happen when using <em>getData</em> and <em>delete</em></td>
</tr>
<tr>
<td>Can&#39;t merge another type of data with an Array</td>
<td align="center">DataError</td>
<td>If you chose to not override the data (merging) when pushing and the new data is an array but the current data isn&#39;t an array (an Object by example).</td>
</tr>
<tr>
<td>Can&#39;t merge an Array with an Object</td>
<td align="center">DataError</td>
<td>Same idea as the previous message. You have an array as current data and ask to merge it with an Object.</td>
</tr>
<tr>
<td>DataPath: /XXX.  YYY is not an array.</td>
<td align="center">DataError</td>
<td>When trying to access an object as an array.</td>
</tr>
<tr>
<td>DataPath: /XXX. Can&#39;t find index INDEX in array YYY</td>
<td align="center">DataError</td>
<td>When trying to access a non-existent index in the array.</td>
</tr>
<tr>
<td>Only numerical values accepted for array index</td>
<td align="center">DataError</td>
<td>An array can only use number for its indexes. For this use the normal object.</td>
</tr>
<tr>
<td>The entry at the path (/XXX) needs to be either an Object or an Array</td>
<td align="center">DataError</td>
<td>When using the find method, the rootPath need to point to an object or an array to search into it for the wanted value.</td>
</tr>
<tr>
<td>Can&#39;t Load Database:  XXXX</td>
<td align="center">DatabaseError</td>
<td>JsonDB can&#39;t load the database for &quot;err&quot; reason. You can find the nested error in <strong>error.inner</strong></td>
</tr>
<tr>
<td>Can&#39;t save the database: XXX</td>
<td align="center">DatabaseError</td>
<td>JsonDB can&#39;t save the database for &quot;err&quot; reason. You can find the nested error in <strong>error.inner</strong></td>
</tr>
<tr>
<td>DataBase not loaded. Can&#39;t write</td>
<td align="center">DatabaseError</td>
<td>Since the database hasn&#39;t been loaded correctly, the module won&#39;t let you save the data to avoid erasing your database.</td>
</tr>
</tbody></table>

<a href="#limitations" id="limitations" style="color: inherit; text-decoration: none;">
  <h1>Limitations</h1>
</a>

<a href="#object-with-separator-in-key" id="object-with-separator-in-key" style="color: inherit; text-decoration: none;">
  <h2>Object with <code>separator</code> in key</h2>
</a>
<p> Object pushed with key containing the <code>separator</code> character won&#39;t be reachable. See <a href="https://github.com/Belphemur/node-json-db/issues/75">#75</a>.</p>
<p> Please consider the <code>separator</code> as a reserved character by node-json-await db.</p>

<a href="#contributors" id="contributors" style="color: inherit; text-decoration: none;">
  <h1>Contributors</h1>
</a>
<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<table>
  <tr>
    <td align="center"><a href="https://davisjam.github.io/"><img src="https://avatars.githubusercontent.com/u/22822319?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Jamie Davis</b></sub></a><br /><a href="#security-davisjam" title="Security">üõ°Ô∏è</a></td>
    <td align="center"><a href="https://github.com/sidblommerswork"><img src="https://avatars.githubusercontent.com/u/93680615?v=4?s=100" width="100px;" alt=""/><br /><sub><b>sidblommerswork</b></sub></a><br /><a href="https://github.com/Belphemur/node-json-db/commits?author=sidblommerswork" title="Code">üíª</a> <a href="https://github.com/Belphemur/node-json-db/commits?author=sidblommerswork" title="Tests">‚ö†Ô∏è</a></td>
    <td align="center"><a href="https://github.com/drproktor"><img src="https://avatars.githubusercontent.com/u/19718418?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Max Huber</b></sub></a><br /><a href="https://github.com/Belphemur/node-json-db/commits?author=drproktor" title="Code">üíª</a></td>
  </tr>
</table>

<!-- markdownlint-restore -->
<!-- prettier-ignore-end -->

<!-- ALL-CONTRIBUTORS-LIST:END -->

<a href="#special-thanks" id="special-thanks" style="color: inherit; text-decoration: none;">
  <h2>Special Thanks</h2>
</a>
<p><a href="https://github.com/davisjam">James Davis</a> for helping to fix a regular expression vulnerable to <a href="https://docs.microsoft.com/en-us/dotnet/standard/base-types/backtracking-in-regular-expressions">catastrophic backtracking</a>.</p>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p><a href="https://app.fossa.io/projects/git%2Bgithub.com%2FBelphemur%2Fnode-json-db?ref=badge_large">![FOSSA Status](https://app.fossa.io/api/projects/git%2Bgithub.com%2FBelphemur%2Fnode-json-await db.svg?type=large)</a></p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">node-<wbr/>json-<wbr/>db</a>
<ul>
<li class="tsd-kind-module"><a href="modules/JsonDB.html">JsonDB</a></li>
<li class="tsd-kind-module"><a href="modules/adapter_IAdapter.html">adapter/IAdapter</a></li>
<li class="tsd-kind-module"><a href="modules/adapter_data_JsonAdapter.html">adapter/data/<wbr/>Json<wbr/>Adapter</a></li>
<li class="tsd-kind-module"><a href="modules/adapter_file_AtomicFileAdapter.html">adapter/file/<wbr/>Atomic<wbr/>File<wbr/>Adapter</a></li>
<li class="tsd-kind-module"><a href="modules/lib_ArrayInfo.html">lib/<wbr/>Array<wbr/>Info</a></li>
<li class="tsd-kind-module"><a href="modules/lib_DBParentData.html">lib/DBParent<wbr/>Data</a></li>
<li class="tsd-kind-module"><a href="modules/lib_Errors.html">lib/<wbr/>Errors</a></li>
<li class="tsd-kind-module"><a href="modules/lib_JsonDBConfig.html">lib/<wbr/>JsonDBConfig</a></li>
<li class="tsd-kind-module"><a href="modules/lib_Utils.html">lib/<wbr/>Utils</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>